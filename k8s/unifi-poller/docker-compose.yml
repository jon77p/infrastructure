version: "3.8"

services:
  unifi-poller:
    image: golift/unifi-poller:latest
    env_file: secrets.env
    environment:
      - UP_PROMETHEUS_DISABLE=false
      - UP_PROMETHEUS_NAMESPACE=unifipoller
    ports:
      - '9130:9130'
    networks:
      - monitoring
    deploy:
      restart_policy:
        condition: on-failure

networks:
  monitoring:
    attachable: true
