// For format details, see https://aka.ms/devcontainer.json. For config options, see the README at:
// https://github.com/microsoft/vscode-dev-containers/tree/v0.236.0/containers/ubuntu
{
  "name": "Template",
  "image": "ghcr.io/jon77p/codespaces/images/default:latest@sha256:f8f1491b495afcbc90fde38e7b05e9d0dbf2d9031a66fa2fccb51466637e65d7",

  // Use 'forwardPorts' to make a list of ports inside the container available locally.
  // "forwardPorts": [],

  "postStartCommand": "task setup",

  "features": {
    "ghcr.io/devcontainers/features/aws-cli:1@sha256:bbc9fd513c22e331953126c75ad7b2ed1f9044f1cd5890b7073b634810459b18": {
      "version": "latest"
    },
    // "ghcr.io/devcontainers/features/docker-from-docker:1": {
    //   "version": "latest"
    // },
    "ghcr.io/devcontainers/features/rust:1@sha256:0c55e65f2e3df736e478f26ee4d5ed41bae6b54dac1318c443e31444c8ed283c": {
      "version": "latest"
    },
    "ghcr.io/devcontainers/features/terraform:1@sha256:250d08e39c99d9e959e091e74527c22c04eeae728b424da99f002423c7902f82": {
      "version": "latest"
    },
    "ghcr.io/jon77p/codespaces/features/tailscale:latest@sha256:b24f019db029c8630ab3d962f706b792c002e34e8baf2adcf8da3fdef339f850": {
      "version": "latest"
    },
    "ghcr.io/jon77p/codespaces/features/taskfile:latest@sha256:c896eb5bc841597ae291bd18cd719b8eb5cdff93c2852bf31a74d182f2593bef": {
      "version": "latest"
    }
  },

  // VSCode Editor Settings
  "settings": {
    "sync.autoDownload": true,
    "sync.autoUpload": true,
    "telemetry.enableTelemetry": false,
    "redhat.telemetry.enabled": false,
    "debug.javascript.autoAttachFilter": "smart",
    "git.autofetch": true,
    "git.autoStash": true,
    "git.branchProtection": ["main"],
    "files.associations": {
      "*.yml": "yaml"
    },
    "yaml.schemas": {
      "https://json.schemastore.org/taskfile.json": ".github/tasks/**/*.yml"
    },
    "git.confirmSync": true,
    "editor.inlineSuggest.enabled": true,
    "github.copilot.inlineSuggest.enable": true,
    "github.copilot.enable": {
      "*": true,
      "yaml": true,
      "plaintext": false,
      "markdown": false
    }
  }
}
