---
- name: "Create innernet.target"
  become: true
  when: innernet_binary == "innernet"
  copy:
    src: "innernet.target"
    dest: "/usr/lib/systemd/system/innernet.target"

- name: "Create innernet@.service"
  become: true
  when: innernet_binary == "innernet"
  copy:
    src: "innernet@.service"
    dest: "/usr/lib/systemd/system/innernet@.service"

- name: "Create innernet-server@.service"
  become: true
  when: innernet_binary == "innernet-server"
  copy:
    src: "innernet-server@.service"
    dest: "/usr/lib/systemd/system/innernet-server@.service"

- name: "Reload systemd for new service"
  systemd:
    daemon_reload: yes
