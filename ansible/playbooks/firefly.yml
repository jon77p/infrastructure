---
- hosts: localhost,firefly
  vars:
    opconnect_items:
      firefly:
        - "healthcheck"
        - "site_owner"
        - "app_key"
        - "db_username"
        - "db_password"
        - "smtp_username"
        - "smtp_password"
      firefly-importer:
        - "healthcheck"
        - "firefly_access_token"
      plaid:
        - "healthcheck"
        - "firefly_access_token"
        - "plaid_client_id"
        - "plaid_client_secret"
      crowdsec:
        - "key"
  roles:
    - 1password

- hosts: firefly
  become: true
  roles:
    - common
    - cloudflared
    - cloudflare
    - crowdsec
    - iptables
    - innernet
    - dns
    - node_exporter
    - firefly
    - promtail
    - docker
