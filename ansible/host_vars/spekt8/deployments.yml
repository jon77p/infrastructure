---
deployments:
  - kind: Deployment
    apiVersion: apps/v1
    metadata:
      labels:
        app: "{{ service_name }}"
      name: "{{ service_name }}"
      namespace: "{{ service_name }}"
    spec:
      replicas: 1
      selector:
        matchLabels:
          app: "{{ service_name }}"
      template:
        metadata:
          labels:
            app: "{{ service_name }}"
        spec:
          containers:
            - name: "{{ service_name }}"
              image: daveterra/spekt8
              ports:
                - name: web
                  containerPort: 3000
  - kind: Service
    apiVersion: v1
    metadata:
      name: "{{ service_name }}"
      namespace: "{{ service_name }}"
    spec:
      ports:
        - name: web
          port: 3000
          protocol: TCP
      selector:
        app: "{{ service_name }}"
